<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Projetos - Infraestrutura v6.2</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        /* Header */
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: white; font-size: 2rem; margin-bottom: 10px; text-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .header p { color: rgba(255,255,255,0.7); font-size: 0.9rem; }
        .version-badge { display: inline-block; background: rgba(102,126,234,0.3); color: #a5b4fc; padding: 4px 14px; border-radius: 20px; font-size: 0.75rem; margin-top: 10px; font-weight: 600; }
        
        /* KPI Sa√∫de do Portf√≥lio */
        .saude-card { background: rgba(255,255,255,0.95); border-radius: 16px; padding: 20px 30px; margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .saude-main { display: flex; align-items: center; gap: 15px; }
        .saude-icon { font-size: 3rem; }
        .saude-label { font-size: 0.85rem; color: #64748b; text-transform: uppercase; font-weight: 500; }
        .saude-value { font-size: 1.5rem; font-weight: 700; }
        .saude-value.verde { color: #22c55e; }
        .saude-value.amarelo { color: #f59e0b; }
        .saude-value.vermelho { color: #ef4444; }
        .saude-details { display: flex; gap: 30px; }
        .saude-detail { text-align: center; }
        .saude-detail .number { font-size: 1.3rem; font-weight: 700; color: #1e293b; }
        .saude-detail .label { font-size: 0.7rem; color: #64748b; text-transform: uppercase; }
        .saude-tooltip { cursor: help; color: #94a3b8; font-size: 0.9rem; position: relative; }
        .saude-tooltip:hover::after { content: attr(data-tooltip); position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); background: #1e293b; color: white; padding: 8px 12px; border-radius: 8px; font-size: 0.7rem; white-space: pre-line; z-index: 100; min-width: 200px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        
        /* Info Bar */
        .info-bar { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 16px; padding: 20px 30px; margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .info-item { text-align: center; }
        .info-item .number { font-size: 1.8rem; font-weight: 700; color: white; }
        .info-item .label { font-size: 0.65rem; color: rgba(255,255,255,0.6); text-transform: uppercase; letter-spacing: 1px; }
        .info-item.total .number { color: #a78bfa; }
        .info-item.concluido .number { color: #34d399; }
        .info-item.andamento .number { color: #60a5fa; }
        .info-item.critico .number { color: #f87171; }
        .info-item.parados .number { color: #fbbf24; }
        .update-info { text-align: right; }
        .update-info .date { color: white; font-size: 0.85rem; font-weight: 600; }
        .update-info .time-ago { color: rgba(255,255,255,0.5); font-size: 0.7rem; }
        
        /* Alert Box */
        .alert-box { background: linear-gradient(135deg, #fef3c7, #fde68a); border-left: 5px solid #f59e0b; border-radius: 12px; padding: 18px 25px; margin-bottom: 25px; display: flex; align-items: center; gap: 15px; }
        .alert-box.critical { background: linear-gradient(135deg, #fee2e2, #fecaca); border-left-color: #ef4444; }
        .alert-icon { font-size: 2rem; }
        .alert-content { flex: 1; }
        .alert-content h3 { font-size: 1rem; color: #92400e; margin-bottom: 4px; }
        .alert-content p { font-size: 0.85rem; color: #a16207; }
        .alert-box.critical .alert-content h3 { color: #991b1b; }
        .alert-box.critical .alert-content p { color: #b91c1c; }
        .alert-action { background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 10px 20px; border-radius: 10px; text-decoration: none; font-weight: 600; font-size: 0.85rem; transition: all 0.3s; }
        .alert-action:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(239, 68, 68, 0.4); }
        
        /* Decis√µes Necess√°rias */
        .decisoes-box { background: linear-gradient(135deg, #fef2f2, #fee2e2); border-radius: 16px; padding: 20px 25px; margin-bottom: 25px; border-left: 5px solid #ef4444; }
        .decisoes-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .decisoes-header h3 { font-size: 1.1rem; color: #991b1b; display: flex; align-items: center; gap: 10px; }
        .decisoes-badge { background: #ef4444; color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }
        .decisao-item { background: white; border-radius: 10px; padding: 15px; margin-bottom: 10px; border-left: 4px solid #ef4444; }
        .decisao-item:last-child { margin-bottom: 0; }
        .decisao-projeto { font-weight: 700; color: #1e293b; font-size: 0.95rem; margin-bottom: 5px; }
        .decisao-desc { color: #64748b; font-size: 0.85rem; margin-bottom: 8px; }
        .decisao-meta { display: flex; gap: 15px; font-size: 0.75rem; flex-wrap: wrap; }
        .decisao-meta span { display: flex; align-items: center; gap: 5px; }
        .decisao-meta .urgente { color: #ef4444; font-weight: 600; }
        .decisao-meta .responsavel { color: #3b82f6; }
        
        /* Cards de Navega√ß√£o */
        .nav-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; }
        .nav-card { background: rgba(255,255,255,0.95); border-radius: 16px; padding: 30px 25px; text-align: center; cursor: pointer; transition: all 0.3s; text-decoration: none; color: inherit; box-shadow: 0 4px 20px rgba(0,0,0,0.15); }
        .nav-card:hover { transform: translateY(-5px); box-shadow: 0 10px 40px rgba(0,0,0,0.25); }
        .nav-card .icon { font-size: 3rem; margin-bottom: 15px; }
        .nav-card h3 { font-size: 1.1rem; color: #1e293b; margin-bottom: 8px; }
        .nav-card p { font-size: 0.85rem; color: #64748b; }
        .nav-card.resumida { border-bottom: 4px solid #667eea; }
        .nav-card.detalhada { border-bottom: 4px solid #10b981; }
        .nav-card.admin { border-bottom: 4px solid #f59e0b; }
        .nav-card.criticos { background: linear-gradient(135deg, #fef2f2, #fee2e2); border: 2px solid #fecaca; border-bottom: 4px solid #ef4444; }
        .nav-card.criticos:hover { background: linear-gradient(135deg, #fee2e2, #fecaca); }
        .nav-card.criticos h3 { color: #991b1b; }
        .nav-card.criticos p { color: #b91c1c; }
        .nav-card.criticos .criticos-count { font-size: 2rem; font-weight: 700; color: #ef4444; display: block; margin-bottom: 5px; }
        
        /* Filtros Go-Live */
        .golive-filters { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 15px; }
        .golive-filter-btn { padding: 6px 14px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; border: 1px solid #e2e8f0; background: white; cursor: pointer; transition: all 0.2s; }
        .golive-filter-btn:hover { background: #f1f5f9; }
        .golive-filter-btn.active { background: #667eea; color: white; border-color: #667eea; }
        
        /* Pr√≥ximos Go Lives */
        .golives-box { background: rgba(255,255,255,0.95); border-radius: 16px; padding: 25px; margin-bottom: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); }
        .golives-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .golives-header h3 { font-size: 1.1rem; color: #1e293b; display: flex; align-items: center; gap: 10px; }
        .golives-list { display: flex; flex-direction: column; gap: 12px; }
        .golive-item { display: flex; align-items: center; gap: 15px; padding: 12px 15px; background: #f8fafc; border-radius: 10px; transition: background 0.2s; }
        .golive-item:hover { background: #f1f5f9; }
        .golive-date { min-width: 100px; text-align: center; }
        .golive-date .dia { font-size: 1.3rem; font-weight: 700; color: #1e293b; }
        .golive-date .mes { font-size: 0.7rem; color: #64748b; text-transform: uppercase; }
        .golive-badge { padding: 4px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: 600; }
        .golive-badge.hoje { background: #fee2e2; color: #991b1b; }
        .golive-badge.proximo { background: #fef3c7; color: #92400e; }
        .golive-badge.normal { background: #dbeafe; color: #1e40af; }
        .golive-info { flex: 1; }
        .golive-info .nome { font-weight: 600; color: #1e293b; }
        .golive-info .local { font-size: 0.8rem; color: #64748b; }
        
        /* Footer */
        .dashboard-footer { text-align: center; padding: 20px; color: rgba(255,255,255,0.5); font-size: 0.8rem; }
        
        /* Responsivo */
        @media (max-width: 900px) {
            .nav-cards { grid-template-columns: 1fr; }
            .info-bar { justify-content: center; }
            .saude-card { flex-direction: column; text-align: center; }
            .saude-details { justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìä Dashboard de Projetos</h1>
            <p>Infraestrutura TI - Invent Corp</p>
            <span class="version-badge">v6.2</span>
        </div>
        
        <!-- KPI Sa√∫de do Portf√≥lio -->
        <div class="saude-card">
            <div class="saude-main">
                <div class="saude-icon" id="saudeIcon">üìä</div>
                <div>
                    <div class="saude-label">Sa√∫de do Portf√≥lio</div>
                    <div class="saude-value" id="saudeValue">Carregando...</div>
                </div>
                <span class="saude-tooltip" data-tooltip="üü¢ Saud√°vel: < 10% cr√≠ticos&#10;üü° Moderada: 10-25% cr√≠ticos&#10;üî¥ Cr√≠tica: > 25% cr√≠ticos">?</span>
            </div>
            <div class="saude-details">
                <div class="saude-detail">
                    <div class="number" id="saudeCriticos">--%</div>
                    <div class="label">Projetos Cr√≠ticos</div>
                </div>
                <div class="saude-detail">
                    <div class="number" id="saudeAtraso">-- dias</div>
                    <div class="label">Atraso M√©dio</div>
                </div>
            </div>
        </div>
        
        <!-- Info Bar -->
        <div class="info-bar">
            <div class="info-item total">
                <div class="number" id="totalProjects">--</div>
                <div class="label">üìÅ Total</div>
            </div>
            <div class="info-item concluido">
                <div class="number" id="concluidosCount">--</div>
                <div class="label">‚úÖ Conclu√≠dos</div>
            </div>
            <div class="info-item andamento">
                <div class="number" id="andamentoCount">--</div>
                <div class="label">‚è≥ Em Andamento</div>
            </div>
            <div class="info-item critico">
                <div class="number" id="criticosCount">--</div>
                <div class="label">üö® Cr√≠ticos</div>
            </div>
            <div class="info-item parados">
                <div class="number" id="paradosCount">--</div>
                <div class="label">‚è∏Ô∏è Parados 15+</div>
            </div>
            <div class="update-info">
                <div class="date" id="updateDate">--</div>
                <div class="time-ago" id="timeAgo">--</div>
            </div>
        </div>
        
        <!-- Alert Box -->
        <div class="alert-box" id="alertBox" style="display: none;">
            <div class="alert-icon" id="alertIcon">‚ö†Ô∏è</div>
            <div class="alert-content">
                <h3 id="alertTitle">Aten√ß√£o Necess√°ria</h3>
                <p id="alertText">Existem projetos que requerem a√ß√£o.</p>
            </div>
            <a href="view-detalhada.html?filter=criticos" class="alert-action">üö® Ver Cr√≠ticos</a>
        </div>
        
        <!-- Decis√µes Necess√°rias -->
        <div class="decisoes-box" id="decisoesBox" style="display: none;">
            <div class="decisoes-header">
                <h3>üîå Decis√µes Necess√°rias</h3>
                <span class="decisoes-badge" id="decisoesBadge">0 itens</span>
            </div>
            <div id="decisoesList"></div>
        </div>
        
        <!-- Navigation Cards -->
        <div class="nav-cards" style="grid-template-columns: repeat(4, 1fr);">
            <a href="view-detalhada.html?filter=criticos" class="nav-card criticos">
                <div class="icon">üö®</div>
                <span class="criticos-count" id="criticosCount">--</span>
                <h3>Projetos Cr√≠ticos</h3>
                <p>Ver apenas projetos que precisam de aten√ß√£o imediata</p>
            </a>
            <a href="view-simples.html" class="nav-card resumida">
                <div class="icon">üìä</div>
                <h3>Vis√£o Resumida</h3>
                <p>KPIs, filtros e tabela √∫nica com todos os projetos</p>
            </a>
            <a href="view-detalhada.html" class="nav-card detalhada">
                <div class="icon">üìã</div>
                <h3>Vis√£o Detalhada</h3>
                <p>Projetos organizados por status com an√°lise completa</p>
            </a>
            <a href="admin.html" class="nav-card admin">
                <div class="icon">‚öôÔ∏è</div>
                <h3>Administra√ß√£o</h3>
                <p>Importar planilha Excel e exportar dados</p>
            </a>
        </div>
        
        <!-- Pr√≥ximos Go Lives -->
        <div class="golives-box">
            <div class="golives-header">
                <h3>üöÄ Pr√≥ximos Go Lives</h3>
                <div class="golive-filters">
                    <button class="golive-filter-btn active" onclick="filterGoLives('all')">Todos</button>
                    <button class="golive-filter-btn" onclick="filterGoLives(30)">At√© 30 dias</button>
                    <button class="golive-filter-btn" onclick="filterGoLives(60)">30-60 dias</button>
                    <button class="golive-filter-btn" onclick="filterGoLives(90)">60-90 dias</button>
                </div>
            </div>
            <div class="golives-list" id="golivesList">
                <p style="color: #64748b; text-align: center;">Carregando...</p>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="dashboard-footer">
            Dashboard Projetos Infraestrutura ¬∑ v6.2 ¬∑ Atualizado em: <span id="footerUpdate">--</span>
        </footer>
    </div>

    <script>
        let projects = [], atividades = [];

        async function loadData() {
            try {
                const response = await fetch('dados.json');
                const data = await response.json();
                projects = data.projetos || [];
                atividades = data.atividades || [];
                updateDashboard();
                const dataAtual = data.ultimaAtualizacao || new Date().toLocaleString('pt-BR');
                document.getElementById('updateDate').textContent = dataAtual;
                document.getElementById('footerUpdate').textContent = dataAtual;
                calcTimeAgo(data.ultimaAtualizacao);
            } catch (error) {
                console.log('Tentando localStorage...');
                const stored = localStorage.getItem('dashboardData');
                if (stored) {
                    const data = JSON.parse(stored);
                    projects = data.projetos || [];
                    atividades = data.atividades || [];
                    updateDashboard();
                    const dataAtual = data.ultimaAtualizacao || '--';
                    document.getElementById('updateDate').textContent = dataAtual;
                    document.getElementById('footerUpdate').textContent = dataAtual;
                    calcTimeAgo(data.ultimaAtualizacao);
                } else {
                    document.getElementById('updateDate').textContent = 'Dados n√£o dispon√≠veis';
                }
            }
        }

        function calcTimeAgo(dateStr) {
            if (!dateStr) return;
            try {
                const parts = dateStr.split(/[\/\s,:]/).filter(Boolean);
                const dataAtualizacao = new Date(parts[2], parts[1] - 1, parts[0]);
                const hoje = new Date();
                hoje.setHours(0, 0, 0, 0);
                dataAtualizacao.setHours(0, 0, 0, 0);
                const diffDias = Math.floor((hoje - dataAtualizacao) / (1000 * 60 * 60 * 24));
                
                let texto = '';
                if (diffDias === 0) texto = 'hoje';
                else if (diffDias === 1) texto = 'ontem';
                else if (diffDias < 7) texto = `h√° ${diffDias} dias`;
                else texto = `h√° ${Math.floor(diffDias / 7)} semana(s)`;
                
                document.getElementById('timeAgo').textContent = texto;
            } catch (e) { console.error(e); }
        }

        function normalizeStatus(status) {
            if (!status) return 'N√£o Iniciado';
            const s = status.toLowerCase().trim();
            if (s.includes('conclu')) return 'Conclu√≠do';
            if (s.includes('andamento')) return 'Em Andamento';
            if (s.includes('atrasa')) return 'Atrasado';
            if (s.includes('aguard') || s.includes('cliente')) return 'Aguardando';
            return 'N√£o Iniciado';
        }

        function isCritico(p) {
            const status = normalizeStatus(p.status);
            const situacao = (p.situacao || '').toLowerCase();
            const diasParado = parseInt(p.diasParado) || 0;
            const temBloqueador = p.bloqueador && p.bloqueador !== '-' && p.bloqueador.trim() !== '';
            return status === 'Atrasado' || situacao === 'vermelho' || diasParado >= 15 || temBloqueador;
        }

        function updateDashboard() {
            const counts = { total: 0, concluido: 0, andamento: 0, atrasado: 0, aguardando: 0, naoIniciado: 0, criticos: 0, parados15: 0 };
            
            projects.forEach(p => {
                counts.total++;
                const status = normalizeStatus(p.status);
                if (status === 'Conclu√≠do') counts.concluido++;
                else if (status === 'Em Andamento') counts.andamento++;
                else if (status === 'Atrasado') counts.atrasado++;
                else if (status === 'Aguardando') counts.aguardando++;
                else counts.naoIniciado++;
                if (isCritico(p)) counts.criticos++;
                if ((parseInt(p.diasParado) || 0) >= 15) counts.parados15++;
            });

            document.getElementById('totalProjects').textContent = counts.total;
            document.getElementById('concluidosCount').textContent = counts.concluido;
            document.getElementById('andamentoCount').textContent = counts.andamento;
            document.getElementById('criticosCount').textContent = counts.criticos;
            document.getElementById('paradosCount').textContent = counts.parados15;

            renderSaudePortfolio(counts);
            renderAlertBox(counts);
            renderDecisoes();
            renderGoLives();
        }

        function renderSaudePortfolio(counts) {
            const total = counts.total || 1;
            const percentCriticos = Math.round((counts.criticos / total) * 100);
            
            // Calcular atraso m√©dio
            let somaAtraso = 0, comDatas = 0;
            projects.forEach(p => {
                const goLiveOriginal = p.goLiveOriginal ? new Date(p.goLiveOriginal.split('/').reverse().join('-')) : null;
                const goLiveAtual = p.goLiveAtual ? new Date(p.goLiveAtual.split('/').reverse().join('-')) : null;
                if (goLiveOriginal && goLiveAtual) {
                    comDatas++;
                    const diff = Math.ceil((goLiveAtual - goLiveOriginal) / (1000 * 60 * 60 * 24));
                    somaAtraso += Math.max(0, diff);
                }
            });
            const mediaAtraso = comDatas > 0 ? Math.round(somaAtraso / comDatas) : 0;

            // Definir sa√∫de
            let saude, classe, icone;
            if (percentCriticos < 10) {
                saude = 'üü¢ Saud√°vel';
                classe = 'verde';
                icone = 'üíö';
            } else if (percentCriticos <= 25) {
                saude = 'üü° Moderada';
                classe = 'amarelo';
                icone = 'üíõ';
            } else {
                saude = 'üî¥ Cr√≠tica';
                classe = 'vermelho';
                icone = '‚ù§Ô∏è';
            }

            document.getElementById('saudeIcon').textContent = icone;
            document.getElementById('saudeValue').textContent = saude;
            document.getElementById('saudeValue').className = 'saude-value ' + classe;
            document.getElementById('saudeCriticos').textContent = percentCriticos + '%';
            document.getElementById('saudeAtraso').textContent = mediaAtraso + ' dias';
        }

        function renderAlertBox(counts) {
            const alertBox = document.getElementById('alertBox');
            if (counts.atrasado > 0 || counts.parados15 > 0) {
                alertBox.style.display = 'flex';
                alertBox.className = counts.atrasado > 0 ? 'alert-box critical' : 'alert-box';
                document.getElementById('alertIcon').textContent = counts.atrasado > 0 ? 'üö®' : '‚ö†Ô∏è';
                document.getElementById('alertTitle').textContent = 'Aten√ß√£o Necess√°ria!';
                document.getElementById('alertText').textContent = `${counts.atrasado} projeto(s) atrasado(s) e ${counts.parados15} parado(s) h√° 15+ dias. Clique para ver detalhes.`;
            } else {
                alertBox.style.display = 'none';
            }
        }

        function renderDecisoes() {
            const decisoes = projects
                .filter(p => isCritico(p) && p.bloqueador && p.bloqueador !== '-' && p.bloqueador.trim() !== '')
                .sort((a, b) => (parseInt(b.diasParado) || 0) - (parseInt(a.diasParado) || 0))
                .slice(0, 5);

            const box = document.getElementById('decisoesBox');
            const lista = document.getElementById('decisoesList');
            const badge = document.getElementById('decisoesBadge');

            if (decisoes.length === 0) {
                box.style.display = 'none';
                return;
            }

            box.style.display = 'block';
            badge.textContent = decisoes.length + ' itens';

            lista.innerHTML = decisoes.map(p => {
                const diasParado = parseInt(p.diasParado) || 0;
                const responsavel = p.pmoInterno || 'N√£o definido';
                return `
                    <div class="decisao-item">
                        <div class="decisao-projeto">${p.projeto}</div>
                        <div class="decisao-desc">${p.bloqueador}</div>
                        <div class="decisao-meta">
                            <span class="urgente">‚è∞ Bloqueia h√° ${diasParado} dias</span>
                            <span class="responsavel">üë§ ${responsavel}</span>
                            <span>üìç ${p.localizacao || '-'}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        let currentGoLiveFilter = 'all';

        function filterGoLives(filter) {
            currentGoLiveFilter = filter;
            
            // Atualizar bot√µes
            document.querySelectorAll('.golive-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderGoLives();
        }

        function renderGoLives() {
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);

            let proximos = projects
                .filter(p => {
                    if (normalizeStatus(p.status) === 'Conclu√≠do') return false;
                    if (!p.goLiveAtual || p.goLiveAtual === '-') return false;
                    const goLive = new Date(p.goLiveAtual.split('/').reverse().join('-'));
                    return goLive >= hoje;
                })
                .map(p => {
                    const goLive = new Date(p.goLiveAtual.split('/').reverse().join('-'));
                    const diffDias = Math.ceil((goLive - hoje) / (1000 * 60 * 60 * 24));
                    return { ...p, goLiveDate: goLive, diffDias };
                })
                .sort((a, b) => a.goLiveDate - b.goLiveDate);

            // Aplicar filtro
            if (currentGoLiveFilter !== 'all') {
                const maxDias = currentGoLiveFilter;
                if (maxDias === 30) {
                    proximos = proximos.filter(p => p.diffDias <= 30);
                } else if (maxDias === 60) {
                    proximos = proximos.filter(p => p.diffDias > 30 && p.diffDias <= 60);
                } else if (maxDias === 90) {
                    proximos = proximos.filter(p => p.diffDias > 60 && p.diffDias <= 90);
                }
            }

            proximos = proximos.slice(0, 8);

            const lista = document.getElementById('golivesList');

            if (proximos.length === 0) {
                lista.innerHTML = '<p style="color: #64748b; text-align: center; padding: 20px;">Nenhum go-live neste per√≠odo</p>';
                return;
            }

            lista.innerHTML = proximos.map(p => {
                const dia = p.goLiveDate.getDate().toString().padStart(2, '0');
                const meses = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
                const mes = meses[p.goLiveDate.getMonth()];
                
                let badgeClass, badgeText;
                if (p.diffDias === 0) {
                    badgeClass = 'hoje';
                    badgeText = 'üî¥ HOJE!';
                } else if (p.diffDias <= 7) {
                    badgeClass = 'proximo';
                    badgeText = `üü° em ${p.diffDias} dias`;
                } else {
                    badgeClass = 'normal';
                    badgeText = `em ${p.diffDias} dias`;
                }

                return `
                    <div class="golive-item">
                        <div class="golive-date">
                            <div class="dia">${dia}</div>
                            <div class="mes">${mes}</div>
                        </div>
                        <span class="golive-badge ${badgeClass}">${badgeText}</span>
                        <div class="golive-info">
                            <div class="nome">${p.projeto}</div>
                            <div class="local">${p.localizacao || '-'}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        window.addEventListener('load', loadData);
    </script>
</body>
</html>
